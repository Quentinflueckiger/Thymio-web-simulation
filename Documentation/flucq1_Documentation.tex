\documentclass{scrartcl}
\usepackage{lipsum}
%%\usepackage[french]{babel}
%%\usepackage[ngerman]{babel}


%% Choose default font for the document
%% Warning : only ONE of the following should be enabled
\usepackage{kpfonts}
%%\usepackage{libertine}

%% The following chose the default language for the document and
%% use the default typography rules for the choosen language.
\usepackage{polyglossia}
\setdefaultlanguage{english}
%% \setdefaultlanguage{german}
%%\setdefaultlanguage{french}

\usepackage[backend=biber, style=ieee]{biblatex}
\addbibresource{template.bib}

\usepackage{graphicx}
\graphicspath{ {./ressources/images/} }

\usepackage{markdown}
\usepackage{array}

\usepackage{listings}
%% Custom javascript listings, from Gary Hammock recuperated the 18.10.2019 : https://github.com/ghammock/LaTeX_Listings_JavaScript_ES6
\lstdefinelanguage{JavaScript}{
  morekeywords=[1]{break, continue, delete, else, for, function, if, in,
    new, return, this, typeof, var, void, while, with},
  % Literals, primitive types, and reference types.
  morekeywords=[2]{false, null, true, boolean, number, undefined,
    Array, Boolean, Date, Math, Number, String, Object},
  % Built-ins.
  morekeywords=[3]{eval, parseInt, parseFloat, escape, unescape},
  sensitive,
  morecomment=[s]{/*}{*/},
  morecomment=[l]//,
  morecomment=[s]{/**}{*/}, % JavaDoc style comments
  morestring=[b]',
  morestring=[b]"
}[keywords, comments, strings]

\begin{document}
\title{Web Simulation of a Thymio Robot}
\date{\today}   %% or \date{01 november 2018}
\author{Quentin Flückiger (\texttt{flucq1@bfh.ch})}





\maketitle
\clearpage

Declaration of Authorship
\clearpage
\clearpage

Management Summary
\clearpage
\clearpage

\tableofcontents
\clearpage

\section{Introduction}

\section{Environment}

\section{Thymio}
\subsection{What is Thymio} 

Thymio is an educational robot that aims at improving early education (starting in primary school) in STEM (Science, Technology, Engineering and Mathematics),
computational thinking, base computer science and researching the acknowledgment by kids of robots in their learning environment.
The project also had technical aims, such as how to provide hardware modularity, fast reaction time amid perception and action,
clear internal communication bus in a user-friendly way and streamline development for group robot, this includes direct changes to the robots’ programs and parallel debugging wirelessly, 
transparently and cheaply.

The Thymio project is based on a collaboration between the MOBOTS group from the Swiss Federal Institute of Technology in Lausanne (EPFL) and the Lausanne Arts School (ECAL).
MOBOTS being the Miniature Mobile Robots Group, they are mainly focused around system design for small robots of the kind. It started with a strange-looking pile of components, 
that were assembled on any kind of support and holt the name of “Monsieur Patate” (Sir Potato), most likely due to its appearance, 
that saw life during the first workshop between the two contributors. After what the first “Thymio” was developed, 
it was a four-block robot that could be self-assembled, but not self-programmed as it was coming with pre-programmed behaviours. 
It was used as a user study to gather feedback from clients to know what features needed to be implemented on the Thymio II.


\begin{figure}[h!]
  \includegraphics[width=\textwidth]{prototype_thymio_old}
  \caption{From left to right, "Monsieur Patate", Thymio, Thymio II}
  \label{fig:thymio_prototype}
\end{figure}

The result is a robot with a complex and complete set of sensors and actuators. 
The National Centre for Competence in Research (NCCR) Robotics research program supported the development of the robot whereas Mobsya, 
a non-profit organization that creates a robot, software, and educational activities to broaden young people’s mind about technology and science, 
oversees the production, distribution, and communication of said robot. 
Every step of the Thymio project is open-source and has a non-profit aim to enhance the quality of it with the user’s project and research, 
and reduce the cost and augment the lifetime for educational platforms and materials.

\begin{figure}[h!]
  \includegraphics[width=\textwidth]{Wireless-thymioII-sensor-actuator-color-en}
  \caption{Thymio II sensor and actuator}
  \label{fig:thymio_sensor_actuator}
\end{figure}

\subsection{How does it works}

As seen in the figure above there exist two Thymio models, Thymio and Wireless Thymio. 
The difference between them lies in the ability of the second one to be programmed wirelessly, 
as its name suggests. To begin the creation of a program for the robot there exist two possibilities.
The first one, and the most common one for the public is done by using the software Aseba and a connected Thymio. 
In this case, the robot needs to be plugged in via USB cable or USB dongle (possible only if it is the Wireless Thymio) and powered on. 
Then the software can be used to connect to said robot and start to program in one of the four different programming languages, 
that are: VPL, Blockly, Aseba, and Scratch. Once the program is ready and sent to the robot it will be available to play.

The second option is to use the work-in-progress Thymio Suite version. 
This software doesn’t require a Thymio robot to be connected physically (or wirelessly) at all times as it has its own simulator built-in. 
The four said languages are still available, and one need to be chosen. 
After what comes the choice of connecting a physical Thymio or starting a simulation to emulate the programmed behaviour.

\subsection{The different programming languages}
\subsubsection{VPL}

One of the four different possibilities to program the Thymio is by using the visual programming language, or VPL, 
developed by the creator of Aseba. A visual programming language is an abstraction of the more common way to program. 
It is based on the manipulation of program elements graphically that can be manipulated following some spatial grammar to create a program. 
VPLs are based on a set of entities and relations, whereas most of the time entities are represented by boxes, 
or other graphical objects, and relations by simple arrows. They can be categorized into icon-based, 
form-based and diagram-based languages depending on the extent of visual expression inside of it. 
The use of visual programming languages can be found in multiple areas, such as the game engine “Unreal Engine 4” where their system of Blueprints is created upon a node-based VPL, 
or “Microsoft SQL Server Integration Services”. This abstraction allows easier access for neophytes, 
for example using graphic elements such as blocks, forms, diagrams, and others reduce drastically, if not eliminate, the syntactic errors made by the user.

In the case of the VPL developed by Aseba’s team, and the one we are mostly interested in, we have a programming language based on two types of blocks: Event blocks and Action blocks. 
From those two are built the seventeen, respectively eleven event blocks and six action blocks, entities. 
One of the main goals of VPL for Thymio was to let people who cannot yet read the ability to start programming and discover this world.

\begin{figure}[h!]
  \includegraphics[width=\textwidth]{Thymio_blocks}
  \caption{Thymio VPL Event and Action blocks}
  \label{fig:thymio_vpl_blocks}
\end{figure}

To begin creating a program follow the first steps described in the “How does it works” section. 
Once the VPL option has been chosen and the Thymio Visual Programming Language window appears we are ready to go. 
The window is split into six different regions with each of their purposes.
\begin{enumerate}
  \item A tool bar
  \item A programming window
  \item Console messages
  \item The event blocks
  \item The action blocks
  \item The program translated into AESL
\end{enumerate}

\begin{figure}[h!]
  \includegraphics[width=\textwidth]{./VPL/Thymio_VPL_window}
  \caption{Thymio VPL Window}
  \label{fig:thymio_vpl_window}
\end{figure}

At first, the programming window will be empty of blocks, containing just a placeholder with empty slots. 
This placeholder is the base of every Thymio VPL program, it contains exactly one event block and one or more action block. 
This means that whenever the event of the event block happens then the set of actions added to this placeholder will occur at the same time. 
For example, with the following pair:
\begin{figure}[h!]
  \includegraphics[width=\textwidth]{./VPL/middlebtn_forward}
  \label{fig:thymio_vpl_middlebtn_1e1a}
\end{figure}
Both wheels are powered to the maximum when the middle button is pressed. But more than one action can be attributed to one event, 
to do so simply drag another action block onto the previous pair, notice that the same block cannot be used twice for the same event. 
Here we turned the lights on top and set them to a complete green:
\begin{figure}[h!]
  \includegraphics[width=\textwidth]{./VPL/middlebtn_forward_green}
  \label{fig:thymio_vpl_middlebtn_1e2a}
\end{figure}
The maximum amount of action blocks we can add to an event is four, but we can add as many event blocks to our program as we want. 
Let us add two more event blocks to allow the robot to turn:
\begin{figure}[h!]
  \includegraphics[width=\textwidth]{./VPL/middlebtn_3E}
  \label{fig:thymio_vpl_middlebtn_3e6a}
\end{figure}
Now we have a basic behavior, go straight with green lights when the middle button is pushed, turn left on itself with orange lights when the left button is pushed, 
and at last turn right on itself with yellow lights when the right button is pushed.

By clicking the button with a student as an icon we enable the advanced mode that gives us more possibilities for multiple blocks. It raises the amount of action block from four to six as well. 

Let us refactor a bit the program from before, we will change the program by making the robot look left then right and starting over again using timers. 
To help us develop a more interesting program we have now access to a condition, a four led light on top of the robot, using this and the timer we can behave depending on the state of the robot. 
For example, hereafter the middle button was pressed a timer will start and after a short amount of time, it will light one particular led. Afterward, the event “timer elapsed” will be triggered but which pair should the program execute, 
turning right or turning left? Hence comes the use of the condition as we will execute the part of the program that corresponds to the state of the condition light. In this example, it will go back and forth between the two pairs: 
\begin{figure}[h!]
  \includegraphics[width=\textwidth]{./VPL/middlebtn_3E_adv}
  \label{fig:thymio_vpl_middlebtn_3e9a}
\end{figure}

\subsubsection{Blockly}
\subsubsection{Aseba}
\subsubsection{Scratch}
\subsection{What already exist} 
WeBots / Aseba logiciel
\section{TypeScript}
\section{Three JS}

\begin{lstlisting}[style=JavaScript, caption={JavaScript Listing}]
  Javascript code
\end{lstlisting}
For that we read the article book of \cite{Jerald:2015:VBH:2792790}
which is very interesting, much more than the article
\cite{Diniz:2017:UGO:3100317.3100324}

\section{Conclusion and future work}

\section{Appendices}
\subsection{Requirements Documentation}
\subsubsection{Vision}
\subsubsection{Objectives}
\subsubsection{System Boundaries}
\subsubsection{Requirements}

\subsection{Virtual Machine Configuration}
Step by step Guide on how to set it up and use it.

\subsection{Version control}

\subsection{Configuration}
\markdownInput{./Annexe/Configuration.md}

\subsection{Meetings}
\begin{tabular}{ | m{3cm} | m{10cm} | }
  \hline
  Date & Content \\
  \hline
  17.09.2019 & \textbf{Kick Off meeting}\\
  & Documentation/Management\\
  & Technology to use : ThreeJS and Typescript\\
  & Setting up the goals\\
  \hline
  24.09.2019 & \textbf{Second meeting} \\
  & Documentation language : English \\
  & Thymio model \\
  & Base talk about riks management \\
  \hline
  08.10.2019 & \textbf{Third meeting}\\
  & Workplace\\
  & Discussion on the choice of Windows as the Virtual Machine \\
  & Create a configuration file with the information of the VM \\
  & And an architecture proposal \\
  \hline
  15.10.2019 & \textbf{Fourth meeting} \\
  & Which shapes and meshes should the user be able to create for his own custom playground \\
  & Problems with webserver, has to be accessible from outside the vm, so maybe switching from windosw to linux \\
  & Talk about the problem of thymio suite, that is the software allows the user to create programs only if a physical or a simulated one is plugged in \\
  \hline
\end{tabular}

\listoffigures

\listoftables

\section{Problems encountered}
\begin{itemize}
  \item javascript not refreshing properly due to cache -> disable cache
  \item 3d Model not loaded on the webserver -> first tried to change the directory, then mixed two solution. 
        Had to create a web.config file and add file extension for .mtl and .obj.
        https://stackoverflow.com/questions/41245938/web-server-cannot-find-mtl-file
        https://stackoverflow.com/questions/16097580/three-js-loading-obj-error-in-azure-but-not-locally
  \item shadow not rendering on plane of both playgrounds
\end{itemize}

%% Print the bibibliography and add the section to the table of content
\printbibliography[heading=bibintoc]

\end{document}
